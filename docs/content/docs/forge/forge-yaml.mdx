---
title: .forge.yaml Reference
description: Complete reference for the Forge project configuration file
icon: FileCode
---

import { Callout } from 'fumadocs-ui/components/callout'
import { Tab, Tabs } from 'fumadocs-ui/components/tabs'

# .forge.yaml Reference

The `.forge.yaml` file is the project-level configuration for the Forge CLI. It lives at the root of your project and configures project structure, development tools, build settings, deployment targets, code generation, and testing.

<Callout type="info">
This file is **not** the same as `config.yaml` (runtime application config). See [Configuration](/docs/forge/configuration) for runtime config details.
</Callout>

## JSON Schema

A JSON Schema is available for editor auto-completion and validation. Add one of the following to the top of your `.forge.yaml`:

```yaml
# yaml-language-server: $schema=https://raw.githubusercontent.com/xraph/forge/main/schema/forge.schema.json
```

Or configure it in your VS Code / Cursor `settings.json` for all `.forge.yaml` files:

```json
{
  "yaml.schemas": {
    "https://raw.githubusercontent.com/xraph/forge/main/schema/forge.schema.json": ".forge.yaml"
  }
}
```

The schema file is also available locally in the repository at `schema/forge.schema.json`.

---

## Full Annotated Example

Below is a complete `.forge.yaml` with every supported field and inline documentation. All fields except `project.name` are optional — Forge applies sensible defaults when they are omitted.

```yaml
# =============================================================================
# .forge.yaml — Forge project configuration
# Schema: https://raw.githubusercontent.com/xraph/forge/main/schema/forge.schema.json
# =============================================================================

# -----------------------------------------------------------------------------
# Project metadata and structure
# -----------------------------------------------------------------------------
project:
  name: my-project                       # Required. Project name.
  version: "1.0.0"                       # Semver version string.
  description: "My Forge application"    # Human-readable description.
  type: monorepo                         # Project type (currently only "monorepo").
  layout: single-module                  # "single-module" or "multi-module".
  module: github.com/myorg/my-project    # Go module path (required for single-module).

  # Directory structure overrides (single-module layout).
  # Omit to use Go convention defaults.
  structure:
    cmd: ./cmd                           # App entry points (default: ./cmd)
    apps: ./apps                         # App config directories (default: ./apps)
    pkg: ./pkg                           # Shared packages (default: ./pkg)
    internal: ./internal                 # Internal packages (default: ./internal)
    extensions: ./extensions             # Extensions (default: ./extensions)
    database: ./database                 # Migrations & seeds (default: ./database)
    config: ./config                     # Config files (default: ./config)
    deployments: ./deployments           # Deployment artifacts (default: ./deployments)

  # Workspace configuration (multi-module layout only).
  workspace:
    enabled: true
    apps: "./apps/*"                     # Glob for app modules
    services: "./services/*"             # Glob for service modules
    extensions: "./extensions/*"         # Glob for extension modules
    pkg: "./pkg"                         # Shared package path

# -----------------------------------------------------------------------------
# Development server and tooling
# -----------------------------------------------------------------------------
dev:
  auto_discover: true                    # Auto-discover apps in cmd/ or apps/
  discover_pattern: "./cmd/*"            # Custom discovery glob pattern
  default_app: api-gateway               # App to run when none is specified

  # File watching
  watch:
    enabled: true
    paths:                               # Glob patterns to watch
      - "./apps/**/internal/**/*.go"
      - "./pkg/**/*.go"
      - "./internal/**/*.go"
    exclude:                             # Glob patterns to exclude
      - "**/*_test.go"
      - "**/testdata/**"
      - "**/vendor/**"

  # Hot reload
  hot_reload:
    enabled: true
    delay: 500ms                         # Debounce delay before restart

  # Docker dev mode (forge dev --docker)
  docker:
    enabled: false                       # Enable Docker mode by default
    image: golang:1.25-alpine            # Base image for dev container
    dockerfile: ""                       # Custom Dockerfile (empty = auto-generate)
    network: bridge                      # Docker network
    platform: linux/amd64                # Target platform (optional)
    volumes:                             # Extra host:container volume mounts
      /tmp/go-cache: /root/.cache/go-build
    env:                                 # Extra container environment variables
      DEBUG: "true"
      LOG_LEVEL: debug
    build_args:                          # Docker build arguments
      GO_VERSION: "1.25"

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
database:
  driver: postgres                       # postgres, mysql, or sqlite
  migrations_path: ./database/migrations # Path to migration files
  seeds_path: ./database/seeds           # Path to seed files
  models_output: ./database/models       # Output for generated models

  connections:                           # Named database connections
    default:
      url: postgres://user:password@localhost:5432/mydb
      max_connections: 25
      max_idle: 5
    read_replica:
      url: postgres://user:password@replica:5432/mydb
      max_connections: 10
      max_idle: 2

# -----------------------------------------------------------------------------
# Build
# -----------------------------------------------------------------------------
build:
  output_dir: ./bin                      # Binary output directory
  cmd_dir: ./cmd                         # Directory with app entry points
  auto_discover: true                    # Auto-discover buildable apps
  ldflags: "-s -w"                       # Linker flags
  tags:                                  # Build tags
    - production

  # Explicit app list (overrides auto-discovery when non-empty)
  apps:
    - name: api-gateway
      cmd: ./cmd/api-gateway
      output: api-gateway
      dockerfile: docker/Dockerfile.api
    - name: worker
      cmd: ./cmd/worker
      output: worker
      module: ./apps/worker              # Multi-module path

  # Cross-compilation targets
  platforms:
    - os: linux
      arch: amd64
    - os: linux
      arch: arm64
    - os: darwin
      arch: arm64

# -----------------------------------------------------------------------------
# Deployment
# -----------------------------------------------------------------------------
deploy:
  registry: ghcr.io/myorg                # Docker registry prefix

  # Environment definitions
  environments:
    - name: dev
      namespace: dev
      variables:
        LOG_LEVEL: debug
    - name: staging
      namespace: staging
      cluster: staging-cluster
      region: us-east-1
      variables:
        LOG_LEVEL: info
    - name: production
      namespace: prod
      cluster: prod-cluster
      region: us-east-1
      variables:
        LOG_LEVEL: warn

  # Docker deployment config (forge infra docker / forge deploy docker)
  docker:
    build_context: .
    dockerfile: Dockerfile
    compose_file: docker-compose.yml
    network: forge-network
    volumes:
      pg-data: /var/lib/postgresql/data
      redis-data: /data

  # Kubernetes config (forge infra k8s / forge deploy k8s)
  kubernetes:
    manifests: ./deployments/k8s
    namespace: default
    context: my-k8s-cluster
    registry: ghcr.io/myorg

  # DigitalOcean App Platform config (forge infra do)
  digitalocean:
    region: nyc1
    app_spec_file: ./deployments/do/app.yaml
    cluster_name: my-do-cluster
    git_repo: myorg/my-project
    git_branch: main
    deploy_on_push: true

  # Render.com config (forge infra render)
  render:
    blueprint_file: ./deployments/render/render.yaml
    region: oregon
    git_repo: myorg/my-project
    git_branch: main

# -----------------------------------------------------------------------------
# Code generation
# -----------------------------------------------------------------------------
generate:
  templates_path: ./templates            # Custom template directory

  generators:                            # Per-generator overrides
    app:
      output: "./cmd/{{.Name}}"
      cmd_path: "./cmd"
    service:
      output: "./internal/services/{{.Name}}"
      create_module: false
    controller:
      output: "./internal/handlers/{{.Name}}"
      cmd_path: "./cmd"
      internal_path: "./internal"

# -----------------------------------------------------------------------------
# Extensions (pass-through config for Forge extensions)
# -----------------------------------------------------------------------------
extensions:
  auth:
    enabled: true
    default_provider: bearer
  database:
    auto_migrate: true
  cache:
    driver: redis
    ttl: 10m

# -----------------------------------------------------------------------------
# Testing
# -----------------------------------------------------------------------------
test:
  coverage_threshold: 80                 # Minimum coverage percentage
  race_detector: true                    # Enable -race flag
  parallel: true                         # Run tests in parallel
  timeout: 30s                           # Test timeout
```

---

## Section Reference

### `project`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `name` | `string` | — | **Required.** Project name. |
| `version` | `string` | `""` | Project version (semver). |
| `description` | `string` | `""` | Human-readable description. |
| `type` | `string` | `"monorepo"` | Project type. |
| `layout` | `string` | `"single-module"` | `"single-module"` or `"multi-module"`. |
| `module` | `string` | `""` | Go module path. Required for single-module. |
| `structure` | `object` | Go conventions | Directory structure overrides. See [structure](#structure). |
| `workspace` | `object` | — | Multi-module workspace config. See [workspace](#workspace). |

#### `structure`

All fields default to standard Go conventions if omitted.

| Field | Default | Description |
|-------|---------|-------------|
| `cmd` | `./cmd` | App entry point directory. |
| `apps` | `./apps` | App config directories (also used for app-level `.forge.yaml`). |
| `pkg` | `./pkg` | Shared packages. |
| `internal` | `./internal` | Internal packages. |
| `extensions` | `./extensions` | Extension code. |
| `database` | `./database` | Migrations and seeds. |
| `config` | `./config` | Config files. |
| `deployments` | `./deployments` | Deployment artifacts. |

#### `workspace`

Used only when `project.layout` is `"multi-module"`.

| Field | Default | Description |
|-------|---------|-------------|
| `enabled` | `false` | Enable Go workspace mode. |
| `apps` | `"./apps/*"` | Glob for app modules. |
| `services` | `""` | Glob for service modules. |
| `extensions` | `""` | Glob for extension modules. |
| `pkg` | `"./pkg"` | Shared package path. |

---

### `dev`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `auto_discover` | `bool` | `true` | Auto-discover apps. |
| `discover_pattern` | `string` | `"./cmd/*"` | Discovery glob pattern. |
| `default_app` | `string` | `""` | Default app when none specified. |
| `watch` | `object` | — | File watching config. See [watch](#watch). |
| `hot_reload` | `object` | — | Hot reload config. See [hot_reload](#hot_reload). |
| `docker` | `object` | — | Docker dev config. See [docker (dev)](#docker-dev). |

#### `watch`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `enabled` | `bool` | `true` | Enable file watching. |
| `paths` | `string[]` | `["./apps/**/internal/**/*.go", "./pkg/**/*.go", "./internal/**/*.go"]` | Glob patterns to watch. |
| `exclude` | `string[]` | `["**/*_test.go", "**/testdata/**", "**/vendor/**"]` | Glob patterns to exclude. |

#### `hot_reload`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `enabled` | `bool` | `true` | Enable hot reload. |
| `delay` | `duration` | `500ms` | Debounce delay before restart. |

#### `docker` (dev)

Configuration for `forge dev --docker`. See the [Docker Development Mode](/docs/forge/cli/development#docker-development-mode) docs for full usage.

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `enabled` | `bool` | `false` | Enable Docker mode by default. |
| `image` | `string` | `golang:1.25-alpine` | Base Docker image. |
| `dockerfile` | `string` | `""` | Custom Dockerfile path (empty = auto-generate). |
| `network` | `string` | `bridge` | Docker network name. |
| `platform` | `string` | `""` | Target platform (e.g., `linux/amd64`). |
| `volumes` | `map[string]string` | `{}` | Extra volumes (host path → container path). |
| `env` | `map[string]string` | `{}` | Extra environment variables. |
| `build_args` | `map[string]string` | `{}` | Docker build arguments. |

---

### `database`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `driver` | `string` | `"postgres"` | Database driver: `postgres`, `mysql`, or `sqlite`. |
| `migrations_path` | `string` | `"./database/migrations"` | Migration files directory. |
| `seeds_path` | `string` | `"./database/seeds"` | Seed files directory. |
| `models_output` | `string` | `"./database/models"` | Generated models output. |
| `connections` | `map[string]object` | `{}` | Named connections. Each value has `url`, `max_connections`, `max_idle`. |

---

### `build`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `output_dir` | `string` | `"./bin"` | Binary output directory. |
| `cmd_dir` | `string` | `"./cmd"` | Directory with entry points. |
| `auto_discover` | `bool` | `true` | Auto-discover buildable apps. |
| `ldflags` | `string` | `""` | Linker flags for `go build`. |
| `tags` | `string[]` | `[]` | Build tags. |
| `apps` | `BuildApp[]` | `[]` | Explicit app list. See [apps (build)](#apps-build). |
| `platforms` | `Platform[]` | `[]` | Cross-compilation targets. |

#### `apps` (build)

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | `string` | Yes | Application name. |
| `module` | `string` | No | Go module path (multi-module). |
| `cmd` | `string` | No | Path to main.go directory. |
| `output` | `string` | No | Binary output name. |
| `dockerfile` | `string` | No | Dockerfile path. |

#### `platforms`

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `os` | `string` | Yes | `linux`, `darwin`, or `windows`. |
| `arch` | `string` | Yes | `amd64`, `arm64`, or `386`. |

---

### `deploy`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `registry` | `string` | `""` | Docker registry prefix. |
| `environments` | `EnvironmentConfig[]` | `[]` | Environment definitions. |
| `docker` | `object` | — | Docker deployment config. |
| `kubernetes` | `object` | — | Kubernetes config. |
| `digitalocean` | `object` | — | DigitalOcean config. |
| `render` | `object` | — | Render.com config. |

#### `environments`

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `name` | `string` | Yes | Environment name (e.g., `dev`, `staging`, `production`). |
| `cluster` | `string` | No | Kubernetes cluster name. |
| `namespace` | `string` | No | Kubernetes namespace. |
| `region` | `string` | No | Cloud region. |
| `variables` | `map[string]string` | No | Environment variables. |

#### `docker` (deploy)

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `build_context` | `string` | `"."` | Docker build context. |
| `dockerfile` | `string` | `"Dockerfile"` | Dockerfile path. |
| `compose_file` | `string` | `"docker-compose.yml"` | Compose file path. |
| `network` | `string` | `""` | Docker network name. |
| `volumes` | `map[string]string` | `{}` | Named volumes. |

#### `kubernetes`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `manifests` | `string` | `"./deployments/k8s"` | Manifests directory. |
| `namespace` | `string` | `"default"` | Default namespace. |
| `context` | `string` | `""` | kubectl context. |
| `registry` | `string` | `""` | Image registry. |

#### `digitalocean`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `region` | `string` | `""` | DO region (e.g., `nyc1`). |
| `app_spec_file` | `string` | `""` | App spec file path. |
| `cluster_name` | `string` | `""` | DOKS cluster name. |
| `git_repo` | `string` | `""` | GitHub repo (`owner/repo`). |
| `git_branch` | `string` | `"main"` | Branch to deploy. |
| `deploy_on_push` | `bool` | `false` | Auto-deploy on push. |

#### `render`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `blueprint_file` | `string` | `""` | Render blueprint path. |
| `region` | `string` | `""` | Render region. |
| `git_repo` | `string` | `""` | GitHub repo (`owner/repo`). |
| `git_branch` | `string` | `"main"` | Branch to deploy. |

---

### `generate`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `templates_path` | `string` | `"./templates"` | Custom template directory. |
| `generators` | `map[string]object` | `{}` | Per-generator overrides. |

Each generator entry supports:

| Field | Type | Description |
|-------|------|-------------|
| `output` | `string` | Output path template. |
| `cmd_path` | `string` | Override cmd path (single-module). |
| `internal_path` | `string` | Override internal path (single-module). |
| `create_module` | `bool` | Create a Go module (multi-module). |
| `module_path` | `string` | Module path template (multi-module). |

---

### `extensions`

The `extensions` key is a free-form map. Keys are extension names, values are extension-specific configuration objects. These values are passed through to extensions at runtime.

```yaml
extensions:
  auth:
    enabled: true
    default_provider: bearer
  cache:
    driver: redis
    ttl: 10m
```

---

### `test`

| Field | Type | Default | Description |
|-------|------|---------|-------------|
| `coverage_threshold` | `int` | `80` | Minimum coverage percentage (0–100). |
| `race_detector` | `bool` | `true` | Enable `-race` flag. |
| `parallel` | `bool` | `true` | Run tests in parallel. |
| `timeout` | `duration` | `30s` | Test timeout. |

---

## App-Level `.forge.yaml`

Individual apps can have their own `.forge.yaml` at `apps/<name>/.forge.yaml`. This file overrides project-level settings for that specific app. A JSON Schema is also available at `schema/forge-app.schema.json`.

```yaml
# yaml-language-server: $schema=https://raw.githubusercontent.com/xraph/forge/main/schema/forge-app.schema.json

# apps/api-gateway/.forge.yaml
app:
  name: api-gateway
  type: web
  version: "1.0.0"

dev:
  port: 8080
  host: localhost
  env_file: .env.api
  docker:
    image: golang:1.25-bookworm
    network: api-network
    env:
      SERVICE_NAME: api-gateway

build:
  output: api-gateway
  dockerfile: docker/Dockerfile.api
  tags:
    - jsoniter
  ldflags: "-X main.version=1.0.0"
```

### App Config Fields

| Field | Type | Description |
|-------|------|-------------|
| `app.name` | `string` | **Required.** Application name. |
| `app.type` | `string` | App type: `web`, `cli`, `worker`, `grpc`. |
| `app.version` | `string` | App version. |
| `dev.port` | `int` | Dev server port. |
| `dev.host` | `string` | Dev server host (default: `localhost`). |
| `dev.env_file` | `string` | Path to `.env` file. |
| `dev.docker` | `object` | Docker dev overrides (same schema as project-level `dev.docker`). |
| `build.output` | `string` | Binary output name. |
| `build.dockerfile` | `string` | Dockerfile path. |
| `build.tags` | `string[]` | Build tags. |
| `build.ldflags` | `string` | Linker flags. |

---

## Minimal Examples

### Minimal Single-Module

The smallest valid `.forge.yaml`:

```yaml
project:
  name: my-api
  module: github.com/me/my-api
```

Everything else uses convention defaults: `cmd/` for entry points, `./bin` for output, `postgres` driver, hot reload enabled, etc.

### Minimal Multi-Module

```yaml
project:
  name: my-platform
  layout: multi-module
  workspace:
    enabled: true
    apps: "./apps/*"
```

### With Docker Dev

```yaml
project:
  name: my-api
  module: github.com/me/my-api

dev:
  docker:
    network: my-network
    env:
      DEBUG: "true"
```

### With Full Deploy Pipeline

```yaml
project:
  name: my-platform
  module: github.com/me/my-platform

deploy:
  registry: ghcr.io/me

  environments:
    - name: dev
      namespace: dev
    - name: production
      namespace: prod
      region: us-east-1

  kubernetes:
    context: prod-cluster
```
