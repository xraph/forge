(()=>{(function(){"use strict";function d(e){return Array.from(e.querySelectorAll("[data-tui-tagsinput-hidden-inputs] input")).map(n=>n.value.toLowerCase())}function r(e,n){let t=e.getAttribute("data-tui-tagsinput-suggestions-id");if(!t)return;let i=document.getElementById(t);if(!i)return;let s=d(e),u=n.toLowerCase().trim(),a=null;i.querySelectorAll("[data-tui-tagsinput-suggestion]").forEach(o=>{let g=o.getAttribute("data-tui-tagsinput-suggestion-value").toLowerCase(),f=!s.includes(g)&&g.includes(u);o.style.display=f?"":"none",o.classList.remove("bg-accent"),f&&!a&&(a=o)}),a?(a.classList.add("bg-accent"),window.tui?.popover?.open(t)):window.tui?.popover?.close(t)}function p(e){let n=e.getAttribute("data-tui-tagsinput-suggestions-id");if(!n)return[];let t=document.getElementById(n);return t?Array.from(t.querySelectorAll("[data-tui-tagsinput-suggestion]")).filter(i=>i.style.display!=="none"):[]}function l(e,n){let t=p(e);if(!t.length)return;let i=t.findIndex(u=>u.classList.contains("bg-accent"));t.forEach(u=>u.classList.remove("bg-accent"));let s=n==="down"?i+1:i-1;s>=t.length&&(s=0),s<0&&(s=t.length-1),t[s].classList.add("bg-accent"),t[s].scrollIntoView({block:"nearest"})}function c(e,n){let t=e.querySelector("[data-tui-tagsinput-text-input]"),i=n.trim();if(!i||t?.disabled)return;if(d(e).includes(i.toLowerCase())){t.value="";return}let s=document.createElement("div");s.className="inline-flex items-center gap-2 rounded-md border px-2.5 py-0.5 text-xs font-semibold border-transparent bg-primary text-primary-foreground",s.setAttribute("data-tui-tagsinput-chip",""),s.innerHTML=`<span>${i}</span><button type="button" class="ml-1 hover:text-destructive cursor-pointer" data-tui-tagsinput-remove><svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg></button>`,e.querySelector("[data-tui-tagsinput-chips]").appendChild(s);let u=document.createElement("input");u.type="hidden",u.name=e.getAttribute("data-tui-tagsinput-name")||"",u.value=i,e.querySelector("[data-tui-tagsinput-hidden-inputs]").appendChild(u),t.value=""}document.addEventListener("focusin",e=>{let n=e.target.closest("[data-tui-tagsinput-text-input]");if(!n)return;let t=n.closest("[data-tui-tagsinput]");t&&r(t,n.value)}),document.addEventListener("focusout",e=>{let n=e.target.closest("[data-tui-tagsinput-text-input]");if(!n)return;let i=n.closest("[data-tui-tagsinput]")?.getAttribute("data-tui-tagsinput-suggestions-id");i&&window.tui?.popover?.close(i)}),document.addEventListener("input",e=>{let n=e.target.closest("[data-tui-tagsinput-text-input]");if(!n)return;let t=n.closest("[data-tui-tagsinput]");t&&r(t,n.value)}),document.addEventListener("mousedown",e=>{let n=e.target.closest("[data-tui-tagsinput-suggestion]");if(!n)return;e.preventDefault();let t=n.closest("[data-tui-popover-id]"),i=document.querySelector(`[data-tui-tagsinput-suggestions-id="${t?.id}"]`);i&&(c(i,n.getAttribute("data-tui-tagsinput-suggestion-value")),r(i,""))}),document.addEventListener("click",e=>{let n=e.target.closest("[data-tui-tagsinput-text-input]");if(n){let s=n.closest("[data-tui-tagsinput]");s&&r(s,n.value);return}let t=e.target.closest("[data-tui-tagsinput-remove]");if(t){let s=t.closest("[data-tui-tagsinput-chip]"),u=s?.closest("[data-tui-tagsinput]"),a=s?.querySelector("span")?.textContent;s?.remove(),u?.querySelector(`[data-tui-tagsinput-hidden-inputs] input[value="${a}"]`)?.remove();return}let i=e.target.closest("[data-tui-tagsinput]");i&&!e.target.closest("input")&&i.querySelector("[data-tui-tagsinput-text-input]")?.focus()}),document.addEventListener("keydown",e=>{let n=e.target.closest("[data-tui-tagsinput-text-input]");if(!n)return;let t=n.closest("[data-tui-tagsinput]");if(!t)return;let i=t.getAttribute("data-tui-tagsinput-suggestions-id"),s=i&&window.tui?.popover?.isOpen(i);if(e.key==="ArrowDown"&&s)e.preventDefault(),l(t,"down");else if(e.key==="ArrowUp"&&s)e.preventDefault(),l(t,"up");else if(e.key==="Enter"){e.preventDefault();let a=p(t).find(o=>o.classList.contains("bg-accent"));a?(c(t,a.getAttribute("data-tui-tagsinput-suggestion-value")),r(t,"")):(c(t,n.value),r(t,""))}else if(e.key===",")e.preventDefault(),c(t,n.value),r(t,"");else if(e.key==="Escape"&&s)e.preventDefault(),window.tui?.popover?.close(i);else if(e.key==="Backspace"&&n.value===""){let a=t.querySelector("[data-tui-tagsinput-chips]")?.lastElementChild;if(a){let o=a.querySelector("span")?.textContent;a.remove(),t.querySelector(`[data-tui-tagsinput-hidden-inputs] input[value="${o}"]`)?.remove()}}})})();})();
