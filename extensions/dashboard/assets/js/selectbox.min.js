(()=>{(function(){"use strict";function A(t){if(t._tui)return;t._tui=!0;let e=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");e?.set&&Object.defineProperty(t,"value",{get:e.get,set(n){let c=this.value;e.set.call(this,n),c!==n&&this.dispatchEvent(new Event("input",{bubbles:!0}))},configurable:!0})}function f(t){let e=t.querySelector("[data-tui-selectbox-clear-trigger]");if(!e)return;let n=t.querySelector("[data-tui-selectbox-chevron]"),o=!!t.querySelector('input[type="hidden"]')?.value&&!t.disabled;e.classList.toggle("hidden",!o),n&&n.classList.toggle("hidden",o)}function S(t){let e=t.querySelector('input[type="hidden"]');!e||!e.value||(e.value="",e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("change",{bubbles:!0})))}function E(t){let e=t.querySelector('input[type="hidden"]'),n=t.getAttribute("data-tui-selectbox-content-id"),c=document.getElementById(n);if(!e||!c)return;let o=t.getAttribute("data-tui-selectbox-multiple")==="true",i=e.value?o?e.value.split(","):[e.value]:[];c.querySelectorAll(".select-item").forEach(s=>{let u=s.getAttribute("data-tui-selectbox-value")||"",r=i.includes(u),a=s.getAttribute("data-tui-selectbox-selected")==="true";r!==a&&s.setAttribute("data-tui-selectbox-selected",r.toString())})}function p(t){let e=t.querySelector(".select-value"),n=t.querySelector('input[type="hidden"]'),c=t.getAttribute("data-tui-selectbox-content-id"),o=document.getElementById(c);if(!e){f(t);return}if(!o&&n&&n.value){e.textContent=n.value,e.classList.remove("text-muted-foreground"),f(t);return}if(!o){f(t);return}let i=t.getAttribute("data-tui-selectbox-multiple")==="true",s=t.getAttribute("data-tui-selectbox-show-pills")==="true",u=e.getAttribute("data-tui-selectbox-placeholder")||"Select...",r=o.querySelectorAll('.select-item[data-tui-selectbox-selected="true"]');if(r.length===0){e.textContent=u,e.classList.add("text-muted-foreground"),n&&(n.value=""),f(t);return}if(e.classList.remove("text-muted-foreground"),i){if(s){e.innerHTML="";let l=document.createElement("div");l.className="flex flex-wrap gap-1 items-center min-h-[1.5rem]";let y=[];Array.from(r).forEach(d=>{let m=document.createElement("span");m.className="inline-flex items-center gap-1 px-2 py-0.5 text-xs rounded-md bg-primary text-primary-foreground";let g=document.createElement("span");g.textContent=d.querySelector(".select-item-text")?.textContent||"",m.appendChild(g);let b=document.createElement("button");b.className="ml-0.5 hover:text-destructive focus:outline-none",b.type="button",b.innerHTML="\xD7",b.setAttribute("data-tui-selectbox-pill-remove",""),b.setAttribute("data-tui-selectbox-value",d.getAttribute("data-tui-selectbox-value")),m.appendChild(b),y.push(m)}),y.forEach(d=>l.appendChild(d)),e.appendChild(l),requestAnimationFrame(()=>{let d=e.offsetWidth;if(l.scrollWidth>d-10&&r.length>3){let g=t.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";e.textContent=g.replace("{n}",r.length)}})}else{let l=t.getAttribute("data-tui-selectbox-selected-count-text")||"{n} items selected";e.textContent=l.replace("{n}",r.length)}let a=Array.from(r).map(l=>l.getAttribute("data-tui-selectbox-value")||"");n&&(n.value=a.join(","))}else{let a=r[0],l=a.querySelector(".select-item-text")?.textContent||"";e.textContent=l,n&&(n.value=a.getAttribute("data-tui-selectbox-value")||"")}f(t)}function v(t){let e=t.value.toLowerCase().trim(),n=t.closest("[data-tui-popover-id]");n&&n.querySelectorAll(".select-item").forEach(c=>{let o=c.querySelector(".select-item-text")?.textContent.toLowerCase()||"",i=c.getAttribute("data-tui-selectbox-value")?.toLowerCase()||"",s=!e||o.includes(e)||i.includes(e);c.style.display=s?"":"none"})}function h(t){if(t.getAttribute("data-tui-selectbox-disabled")==="true")return;let e=t.closest("[data-tui-popover-id]"),n=e?.id,c=document.querySelector(`[data-tui-selectbox-content-id="${n}"]`);if(!c)return;let o=c.getAttribute("data-tui-selectbox-multiple")==="true",i=t.getAttribute("data-tui-selectbox-selected")==="true";o||e.querySelectorAll(".select-item").forEach(u=>{u.setAttribute("data-tui-selectbox-selected","false")}),t.setAttribute("data-tui-selectbox-selected",(!i).toString()),p(c);let s=c.querySelector('input[type="hidden"]');s&&s.dispatchEvent(new Event("change",{bubbles:!0})),!o&&window.closePopover&&(window.closePopover(n),setTimeout(()=>c.focus(),50))}function q(){document.querySelectorAll(".select-container").forEach(t=>{let e=t.querySelector("button.select-trigger");e&&p(e)})}document.addEventListener("pointerdown",t=>{let e=t.target.closest("[data-tui-selectbox-clear-trigger]");if(!e)return;t.preventDefault(),t.stopPropagation();let n=e.closest("button.select-trigger");n&&(n.setAttribute("data-tui-selectbox-suppress-click","true"),S(n))},!0),document.addEventListener("click",t=>{let e=t.target.closest("[data-tui-selectbox-clear-trigger]"),n=t.target.closest("button.select-trigger");if(e){t.preventDefault(),t.stopPropagation();return}n?.getAttribute("data-tui-selectbox-suppress-click")==="true"&&(n.removeAttribute("data-tui-selectbox-suppress-click"),t.preventDefault(),t.stopPropagation())},!0),document.addEventListener("click",t=>{if(t.target.matches("[data-tui-selectbox-pill-remove]")){t.stopPropagation();let c=t.target.getAttribute("data-tui-selectbox-value"),i=t.target.closest("button.select-trigger")?.getAttribute("data-tui-selectbox-content-id"),u=document.getElementById(i)?.querySelector(`.select-item[data-tui-selectbox-value="${c}"]`);u&&h(u);return}let e=t.target.closest(".select-item");if(e){t.preventDefault(),h(e);return}let n=t.target.closest("button.select-trigger");if(n){let c=n.getAttribute("data-tui-selectbox-content-id"),o=document.getElementById(c),i=o?.querySelector("[data-tui-selectbox-search]");requestAnimationFrame(i?()=>{o.style.display!=="none"&&i.focus()}:()=>{let s=o.querySelector(".select-item");s&&s.focus()})}}),document.addEventListener("input",t=>{if(t.target.matches("[data-tui-selectbox-search]")){v(t.target);return}if(t.target.matches("[data-tui-selectbox-hidden-input]")){let e=t.target.closest(".select-trigger");e&&(E(e),p(e))}}),document.addEventListener("keydown",t=>{let e=document.activeElement;if(e?.matches("button.select-trigger")&&(t.key.length===1||t.key==="Backspace")){t.preventDefault();let c=e.getAttribute("data-tui-selectbox-content-id");e.click(),setTimeout(()=>{let o=document.getElementById(c)?.querySelector("[data-tui-selectbox-search]");o&&(o.focus(),t.key!=="Backspace"&&(o.value=t.key))},50)}let n=e?.closest("[data-tui-popover-id]");if(n?.querySelector(".select-item")){if(t.key==="ArrowDown"||t.key==="ArrowUp"){t.preventDefault();let c=Array.from(n.querySelectorAll(".select-item")).filter(s=>s.style.display!=="none");if(c.length===0)return;let o=n.querySelector(".select-item:focus"),i=0;if(o){let s=c.indexOf(o);i=t.key==="ArrowDown"?(s+1)%c.length:(s-1+c.length)%c.length}c[i].focus()}else if(t.key==="Enter"&&e?.matches(".select-item"))t.preventDefault(),h(e);else if(t.key==="Escape"){let c=n.querySelector("[data-tui-selectbox-search]");if(e?.matches(".select-item"))c?.focus();else if(e===c&&window.closePopover){window.closePopover(n.id);let o=document.querySelector(`[data-tui-selectbox-content-id="${n.id}"]`);setTimeout(()=>o?.focus(),50)}}}}),document.addEventListener("reset",t=>{t.target.matches("form")&&t.target.querySelectorAll(".select-container").forEach(e=>{let n=e.querySelector("button.select-trigger"),c=n?.getAttribute("data-tui-selectbox-content-id"),o=document.getElementById(c);if(o){o.querySelectorAll(".select-item").forEach(s=>{s.setAttribute("data-tui-selectbox-selected","false")});let i=o.querySelector("[data-tui-selectbox-search]");i&&(i.value="",v(i))}n&&p(n)})});function x(){document.querySelectorAll(".select-container").forEach(t=>{let e=t.querySelector("button.select-trigger");if(e&&!e.hasAttribute("data-initialized")){e.setAttribute("data-initialized","true");let n=e.querySelector('input[type="hidden"]');n&&A(n),p(e)}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",x):x(),new MutationObserver(x).observe(document.body,{childList:!0,subtree:!0})})();})();
