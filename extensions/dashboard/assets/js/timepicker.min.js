(()=>{(function(){"use strict";function y(e){if(e._tui)return;e._tui=!0;let t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");t?.set&&Object.defineProperty(e,"value",{get:t.get,set(i){let u=this.value;t.set.call(this,i),u!==i&&this.dispatchEvent(new Event("input",{bubbles:!0}))},configurable:!0})}function s(e){let t=e?.match(/^(\d{1,2}):(\d{2})$/);if(!t)return null;let[i,u,r]=t.map(Number);return u>=0&&u<=23&&r>=0&&r<=59?{hour:u,minute:r}:null}function h(e,t,i){if(e===null||t===null)return null;let u=r=>r.toString().padStart(2,"0");if(i){let r=e===0?12:e>12?e-12:e;return`${u(r)}:${u(t)} ${e>=12?"PM":"AM"}`}return`${u(e)}:${u(t)}`}function l(e,t,i,u){if(!i&&!u)return!0;let r=e*60+t;if(i){let n=i.hour*60+i.minute;if(r<n)return!1}if(u){let n=u.hour*60+u.minute;if(r>n)return!1}return!0}function d(e){let t=e.closest("[data-tui-timepicker-popup]");if(!t)return null;let i=t.closest("[id]")?.id;return i?document.getElementById(i.replace("-content","")):null}function k(e){let t=e.id+"-content",i=document.getElementById(t)?.querySelector("[data-tui-timepicker-popup]");return i?{popup:i,hourList:i.querySelector("[data-tui-timepicker-hour-list]"),minuteList:i.querySelector("[data-tui-timepicker-minute-list]"),hiddenInput:document.getElementById(e.id+"-hidden")||e.parentElement?.querySelector("[data-tui-timepicker-hidden-input]")}:null}function m(e){return{hour:e.dataset.tuiTimepickerCurrentHour?parseInt(e.dataset.tuiTimepickerCurrentHour):null,minute:e.dataset.tuiTimepickerCurrentMinute?parseInt(e.dataset.tuiTimepickerCurrentMinute):null,use12Hours:e.getAttribute("data-tui-timepicker-use12hours")==="true",step:parseInt(e.getAttribute("data-tui-timepicker-step")||"1"),minTime:s(e.getAttribute("data-tui-timepicker-min-time")),maxTime:s(e.getAttribute("data-tui-timepicker-max-time")),placeholder:e.getAttribute("data-tui-timepicker-placeholder")||"Select time"}}function a(e,t,i){t!==null?e.dataset.tuiTimepickerCurrentHour=t:delete e.dataset.tuiTimepickerCurrentHour,i!==null?e.dataset.tuiTimepickerCurrentMinute=i:delete e.dataset.tuiTimepickerCurrentMinute,b(e)}function b(e){let t=m(e),i=k(e),u=e.querySelector("[data-tui-timepicker-display]");if(u){let r=h(t.hour,t.minute,t.use12Hours);u.textContent=r||t.placeholder,u.classList.toggle("text-muted-foreground",!r)}i?.hiddenInput&&(i.hiddenInput.value=t.hour!==null&&t.minute!==null?h(t.hour,t.minute,!1):""),i?.hourList&&i?.minuteList&&I(i,t)}function I(e,t){e.hourList.querySelectorAll("[data-tui-timepicker-hour]").forEach(r=>{let n=parseInt(r.getAttribute("data-tui-timepicker-hour")),o=!1;t.hour!==null&&(t.use12Hours?o=n===t.hour||n===0&&t.hour===12||n===t.hour-12&&t.hour>12:o=n===t.hour),r.setAttribute("data-tui-timepicker-selected",o);let c=!1;for(let f=0;f<60;f++)if(l(n,f,t.minTime,t.maxTime)){c=!0;break}r.disabled=!c,r.classList.toggle("opacity-50",!c),r.classList.toggle("cursor-not-allowed",!c)}),e.minuteList.querySelectorAll("[data-tui-timepicker-minute]").forEach(r=>{let n=parseInt(r.getAttribute("data-tui-timepicker-minute")),o=n===t.minute,c=t.hour===null||l(t.hour,n,t.minTime,t.maxTime);r.setAttribute("data-tui-timepicker-selected",o),r.disabled=!c,r.classList.toggle("opacity-50",!c),r.classList.toggle("cursor-not-allowed",!c)});let i=e.popup.querySelector('[data-tui-timepicker-period="AM"]'),u=e.popup.querySelector('[data-tui-timepicker-period="PM"]');if(i&&u){let r=t.hour===null||t.hour<12;i.setAttribute("data-tui-timepicker-active",r),u.setAttribute("data-tui-timepicker-active",!r)}}document.addEventListener("click",e=>{let t=e.target;if(t.matches("[data-tui-timepicker-hour]")&&!t.disabled){let i=d(t);if(!i)return;let u=m(i),r=parseInt(t.getAttribute("data-tui-timepicker-hour"));if(u.use12Hours){let n=u.hour!==null&&u.hour>=12;r=r===0?n?12:0:n?r+12:r}if(l(r,u.minute,u.minTime,u.maxTime))a(i,r,u.minute);else for(let n=0;n<60;n+=u.step)if(l(r,n,u.minTime,u.maxTime)){a(i,r,n);return}return}if(t.matches("[data-tui-timepicker-minute]")&&!t.disabled){let i=d(t);if(!i)return;let u=m(i),r=parseInt(t.getAttribute("data-tui-timepicker-minute"));(u.hour===null||l(u.hour,r,u.minTime,u.maxTime))&&a(i,u.hour,r);return}if(t.matches("[data-tui-timepicker-period]")){let i=d(t);if(!i)return;let u=m(i);if(u.hour===null)return;let r=t.getAttribute("data-tui-timepicker-period"),n=u.hour;if(r==="AM"&&u.hour>=12?n=u.hour===12?0:u.hour-12:r==="PM"&&u.hour<12&&(n=u.hour===0?12:u.hour+12),n!==u.hour){if(l(n,u.minute,u.minTime,u.maxTime))a(i,n,u.minute);else for(let o=0;o<60;o+=u.step)if(l(n,o,u.minTime,u.maxTime)){a(i,n,o);return}}return}if(t.matches("[data-tui-timepicker-done]")){let i=d(t);i&&window.closePopover&&window.closePopover(i.id+"-content");return}}),document.addEventListener("input",e=>{if(!e.target.matches("[data-tui-timepicker-hidden-input]"))return;let t=document.getElementById(e.target.id.replace("-hidden",""));if(t){let i=s(e.target.value);i?a(t,i.hour,i.minute):a(t,null,null)}}),document.addEventListener("reset",e=>{e.target.matches("form")&&e.target.querySelectorAll('[data-tui-timepicker="true"]').forEach(t=>{a(t,null,null);let i=k(t);i?.hiddenInput&&(i.hiddenInput.value="")})});function p(){document.querySelectorAll('[data-tui-timepicker="true"]').forEach(e=>{let t=document.getElementById(e.id+"-hidden");if(!t||t._tui)return;let i=t.value;if(i){let u=s(i);u&&a(e,u.hour,u.minute)}y(t),b(e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p(),new MutationObserver(p).observe(document.body,{childList:!0,subtree:!0}),new MutationObserver(e=>{for(let t of e){if(t.target.getAttribute("data-tui-popover-open")!=="true")continue;let i=t.target.querySelector("[data-tui-timepicker-popup]");i&&requestAnimationFrame(()=>{i.querySelector('[data-tui-timepicker-hour-list] [data-tui-timepicker-selected="true"]')?.scrollIntoView({block:"center"}),i.querySelector('[data-tui-timepicker-minute-list] [data-tui-timepicker-selected="true"]')?.scrollIntoView({block:"center"})})}}).observe(document.body,{attributes:!0,attributeFilter:["data-tui-popover-open"],subtree:!0})})();})();
